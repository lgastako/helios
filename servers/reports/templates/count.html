{% extends "_base.html" %}
{% block title %}Counts for {{ collection_name }}{% endblock %}
{% block content %}
<article>
  <h1>Collection: {{ collection_name }}</h1>
  <h2>Counts</h2>
  <h3>Group Options</h3>
  <form method="get">
    <label>Group by
      <input type="text" name="group_by" value="{{ group_by or "" }}"/>
    </label>
    <input class="button" type="submit" value="(Re)Group"/>
  </form>
  <h3>
    Showing counts grouped by: {{ group_by or 'Nothing' }}
  </h3>
  <table border="1">
    <tr>
      <th>key</th>
      <th>count</th>
    </tr>
{% if results %}
    {% for link, doc in results: %}
    <tr>
      <td><a href="{{ link }}">{{ doc._id }}</a></td>
      <td>{{ doc.value }}</td>
    </tr>
    {% endfor %}
{% else %}
    <tr>
      <td>ALL</td>
      <td>{{ count }}</td>
    </tr>
{% endif %}
  </table>
</article>
{% endblock %}

{% block extra_nav %}
<h4>Context Nav</h4>
<ul>
  <li><a href="/col/{{ collection_name }}">Collection View</a></li>
</ul>
{% endblock %}
